<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" id="fileInput" required>
    <button type="submit">검수 시작</button>
</form>

<div id="resultContainer" style="display: none;">
    <h3>검수 결과</h3>
    <div style="display: flex; gap: 20px;">
        <div>
            <h4>입력 이미지</h4>
            <img id="originalImage" src="" alt="Original Image" style="width: 300px;">
        </div>
        <div>
            <h4>검출된 이미지</h4>
            <img id="detectedImage" src="" alt="Detected Image" style="width: 300px;">
        </div>
    </div>
</div>

<script>
    document.getElementById("uploadForm").onsubmit = async function(event) {
        event.preventDefault();

        const fileInput = document.getElementById("fileInput").files[0];
        const formData = new FormData();
        formData.append("file", fileInput);

        const response = await fetch("/inspection/inspect", {
            method: "POST",
            body: formData
        });

        if (response.ok) {
            const result = await response.json();
            document.getElementById("originalImage").src = "data:image/jpeg;base64," + result.original_image;
            document.getElementById("detectedImage").src = "data:image/jpeg;base64," + result.detected_image;
            document.getElementById("resultContainer").style.display = "block";
        } else {
            alert("검수 실패!");
        }
    };
</script>
